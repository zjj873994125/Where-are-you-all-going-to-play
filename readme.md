# 中点选址地图工具 · 产品需求文档（PRD）

## 1. 项目背景

在日常生活中，经常会遇到以下场景：

* 多个朋友从不同地点出发，希望寻找一个 **相对“中间”的聚会地点**
* 常见需求包括：

  * 一起吃饭
  * 线下见面
  * 临时集合

现有地图应用：

* 更偏向 **导航 / 单点搜索**
* 对“多点取中 + 场所筛选”支持不足

因此需要一个 **简单直观的中点选址工具**，帮助用户快速找到最合适的集合地点。

---

## 2. 产品定位

### 2.1 产品名称（暂定）

* 中点地图
* MeetPoint
* 一起去哪
* 中间点选址工具

### 2.2 产品定位

> 一个基于高德地图的 **多点取中 + 场所推荐 Web 工具**

### 2.3 核心价值

* 快速算出 **多点几何中点 / 路程中点**
* 一键搜索中点附近的 **餐厅 / 咖啡 / 商场等**

---

## 3. 目标用户

### 3.1 核心用户

* 城市年轻人
* 经常线下聚会的朋友 / 同事
* 对地图操作熟悉的普通用户

### 3.2 使用场景

* 两人 / 多人约饭
* 临时集合点选择
* 不熟悉城市的游客

---

## 4. 核心使用流程

```text
进入网站
↓
添加多个地点（A / B / C）
↓
系统计算中点
↓
展示中点位置
↓
搜索中点附近的餐厅 / 场所
↓
选择地点 → 跳转高德导航
```

---

## 5. 功能模块拆解

## 5.1 地图展示模块

### 功能描述

* 使用高德地图 JS API
* 展示地图基础视图

### 功能点

* 地图缩放 / 拖动
* 地图中心自适应所有点位
* 显示用户选中的点位 Marker

---

## 5.2 地点添加模块（核心）

### 添加方式

支持多种添加方式（V1 可先做前两种）：

1. 搜索地点（地址 / POI）
2. 地图点击添加
3. 使用当前定位（可选）

### 功能点

* 添加多个点（至少 2 个）
* 显示点位列表
* 支持删除 / 清空

---

## 5.3 中点计算模块（核心）

### 功能描述

根据用户选择的多个点，计算一个“中间点”。

### 支持策略（V1 建议）

* **几何中点（经纬度平均）**

```text
lat = (lat1 + lat2 + ... ) / n
lng = (lng1 + lng2 + ... ) / n
```

### 进阶策略（V2）

* 路径时间中点（基于驾车 / 公交时间）
* 权重中点（某人更远）

---

## 5.4 中点展示模块

### 功能点

* 在地图上标注中点
* 使用特殊 Marker 样式
* 自动缩放地图，确保所有点 + 中点可见

---

## 5.5 场所搜索模块（核心）

### 功能描述

基于中点，搜索附近合适的场所。

### 支持类型

* 餐厅（默认）
* 咖啡厅
* 商场
* 酒吧
* 自定义关键词

### 搜索范围

* 默认：500m
* 可选：1km / 2km / 3km

---

## 5.6 场所列表与选择

### 功能点

* 列表展示 POI

  * 名称
  * 距离中点
  * 评分（如有）
* 点击列表 → 地图高亮
* 点击地图 → 列表高亮

---

## 5.7 导航与分享

### 导航

* 点击场所 → 跳转高德地图导航
* 支持：

  * 驾车
  * 步行
  * 公交

### 分享（V2）

* 生成分享链接
* 打开即还原点位和中点

---

## 6. 页面结构设计

### 6.1 主页面

* 顶部：工具标题 + 简介
* 左侧（或底部移动端）：

  * 地点输入 / 列表
  * 中点信息
  * 场所筛选
* 右侧：地图主视图

---

## 7. 非功能性需求

### 7.1 易用性

* 操作步骤 ≤ 3 步
* 新用户无需教程即可使用

### 7.2 性能

* 地图操作流畅
* POI 搜索响应 < 1s

### 7.3 兼容性

* PC / 移动端自适应
* 主流浏览器支持

---

## 8. 技术方案（建议）

### 8.1 前端

* React + TypeScript
* 高德地图 JS API
* 地图 Marker / POI 搜索 API

### 8.2 后端（V1 可无）

* 前端直连高德 API
* Key 做域名限制

### 8.3 数据

* 本地状态管理
* 分享功能可用 URL 参数编码

---

## 9. 版本规划

### V1.0（最小可用版本）

* 多点添加
* 几何中点计算
* 中点附近餐厅搜索
* 跳转导航

### V1.1

* 场所类型筛选
* 搜索半径可选
* UI 优化

### V2.0

* 路径时间中点
* 权重中点
* 分享链接
* 登录 / 历史记录

---

## 10. 风险与限制

* 高德 API 配额限制
* 路径时间中点计算复杂度高
* 城市密集区域 POI 过多，需要筛选策略

---

**文档状态：可直接进入开发阶段**

---

## Docker 部署

详细的部署文档请查看 [README.docker.md](README.docker.md)

### 快速部署

```bash
# 本地部署
./deploy.sh deploy

# 远程部署（需先配置 deploy.sh 中的服务器 IP）
./deploy.sh remote

# 使用 Docker Compose
docker-compose up -d
```

访问地址：http://localhost:38080
